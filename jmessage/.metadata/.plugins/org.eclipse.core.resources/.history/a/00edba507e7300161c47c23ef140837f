package msgclient;

public class TestEncryption {
	static boolean testEncryption(String message) throws Exception {
		
		MessageEncryptor senderEncryptor = new MessageEncryptor("senderTestID");
		MessageEncryptor receiverEncryptor = new MessageEncryptor("receiverTestID");
		
		MsgKeyPair testKeyPair = new MsgKeyPair();
		testKeyPair.generateKeyPair();
		
		// Encrypt the message
		String encryptedMsg = encryptor.encryptMessage(message, testKeyPair);
		if (encryptedMsg == null) {
			System.out.println("Failed to encrypt message.");
			return false;
		}
		
		// Decrypt the resulting ciphertext
		String decryptedMsg = encryptor.decryptMessage(encryptedMsg, encryptor.mSenderID, encryptor.mOurKeys);
		if (decryptedMsg == null) {
			System.out.println("Failed to decrypt message.");
			return false;
		}	

		// Compare the decrypted message to the original
		if (message.equals(decryptedMsg) == true) {
			return true;
		} else {
			return false;
		}
	}
}
